# Changelog

–í—Å–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ AI-Admin –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∑–¥–µ—Å—å.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/).

## [2026-01-11] - –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (—Å–µ—Å—Å–∏—è #7)

### üìù –û–±–Ω–æ–≤–ª–µ–Ω–æ

- **PROJECT_STATUS.md**
  - –û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å PostgreSQL —Ö—Ä–∞–Ω–µ–Ω–∏—è: –≤—Å–µ –∑–∞–¥–∞—á–∏ –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π #5 –∏ #6
  - –û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ "–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ PostgreSQL" ‚Üí ‚úÖ –ì–û–¢–û–í–û

### üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: 87%

**–ù–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Å–µ—Å—Å–∏–π #5-6:**
- `docs/database-schema.mmd` - ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `docs/api-reference.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `docs/PRODUCTION_ROADMAP.md` - roadmap –¥–æ production
- `shared/services/message_repository.py` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- `shared/services/session_repository.py` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
- `shared/services/data_retention_service.py` - GDPR compliance
- `api_gateway/src/api/routers/history.py` - History API
- `infrastructure/migrations/versions/20260111_0002_add_message_indexes.py` - –∏–Ω–¥–µ–∫—Å—ã

---

## [2026-01-11] - PostgreSQL —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π + API –∏—Å—Ç–æ—Ä–∏–∏ (—Å–µ—Å—Å–∏—è #6)

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ

- **MessageRepository** (`shared/services/message_repository.py`)
  - –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ PostgreSQL
  - –ú–µ—Ç–æ–¥—ã: save_message, save_user_message, save_bot_message
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è: get_messages_with_pagination
  - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: count_messages, count_by_channel, get_daily_message_count
  - Data retention: delete_old_messages, delete_all_company_messages

- **SessionRepository** (`shared/services/session_repository.py`)
  - –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ PostgreSQL
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Redis: upsert_session, update_session_state
  - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: count_by_state, get_conversion_rate, get_completed_sessions_count
  - Data retention: delete_old_sessions

- **DataRetentionService** (`shared/services/data_retention_service.py`)
  - –ü–æ–ª–∏—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ –ø–ª–∞–Ω–∞–º –ø–æ–¥–ø–∏—Å–∫–∏ (free: 30 –¥–Ω–µ–π, enterprise: 2 –≥–æ–¥–∞)
  - cleanup_company_data - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - delete_all_company_data - GDPR compliance (–ø—Ä–∞–≤–æ –Ω–∞ –∑–∞–±–≤–µ–Ω–∏–µ)
  - get_data_statistics - —Å–≤–æ–¥–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

- **History API Router** (`api_gateway/src/api/routers/history.py`)
  - `GET /api/v1/history/sessions` - —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - `GET /api/v1/history/sessions/{id}` - –¥–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - `GET /api/v1/history/messages` - —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - `GET /api/v1/history/analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–∫–æ–Ω–≤–µ—Ä—Å–∏—è, –∫–∞–Ω–∞–ª—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è)
  - `GET /api/v1/history/analytics/daily` - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `POST /api/v1/history/cleanup` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - `POST /api/v1/history/cleanup/estimate` - –æ—Ü–µ–Ω–∫–∞ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π

- **–ú–∏–≥—Ä–∞—Ü–∏—è —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏** (`infrastructure/migrations/versions/20260111_0002_add_message_indexes.py`)
  - `idx_messages_company_id` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏
  - `idx_messages_created_at` - –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ retention
  - `idx_messages_company_created` - –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –¥–ª—è –ø–µ—Ä–∏–æ–¥–æ–≤
  - `idx_messages_session_created` - –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
  - `idx_sessions_company_state` - –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
  - `idx_sessions_with_appointment` - partial index –¥–ª—è –∑–∞–ø–∏—Å–µ–π

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ

- **Orchestrator** (`ai_agent/src/core/orchestrator.py`)
  - –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ PostgreSQL
  - –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ –≤ PostgreSQL
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ PostgreSQL
  - Redis –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

```
Redis (–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):
‚îú‚îÄ‚îÄ –°–µ—Å—Å–∏–∏ —Å TTL (24 —á–∞—Å–∞)
‚îú‚îÄ‚îÄ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è Gemini (20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
‚îî‚îÄ‚îÄ Rate limiting counters

PostgreSQL (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å):
‚îú‚îÄ‚îÄ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∞—É–¥–∏—Ç–∞)
‚îú‚îÄ‚îÄ –í—Å–µ —Å–µ—Å—Å–∏–∏ (–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
‚îú‚îÄ‚îÄ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
‚îî‚îÄ‚îÄ Data retention (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞)
```

---

## [2026-01-11] - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–µ—Å—Å–∏—è #5)

### üìö –î–æ–±–∞–≤–ª–µ–Ω–æ

- **Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** (`docs/database-schema.mmd`)
  - –ü–æ–ª–Ω–∞—è ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
  - –í—Å–µ –ø–æ–ª—è —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
  - –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
  - Multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

- **API Reference –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (`docs/api-reference.md`)
  - –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API Gateway –∏ AI Agent
  - Request/Response payloads —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ Rate Limiting
  - Data Models (Message, Session, CRM models)
  - cURL –∏ Python –ø—Ä–∏–º–µ—Ä—ã

- **Production Roadmap** (`docs/PRODUCTION_ROADMAP.md`)
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–ª–∏–∑–∞
  - –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CRM –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
  - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è production
  - –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### üìä –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –î–æ–∫—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| database-schema.mmd | ‚úÖ –°–æ–∑–¥–∞–Ω |
| api-reference.md | ‚úÖ –°–æ–∑–¥–∞–Ω |
| PRODUCTION_ROADMAP.md | ‚úÖ –°–æ–∑–¥–∞–Ω |

---

## [2026-01-10] - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (—Å–µ—Å—Å–∏—è #4)

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û–±–Ω–æ–≤–ª–µ–Ω README.md**
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫" —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
  - –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ 82%
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

- **–û–±–Ω–æ–≤–ª–µ–Ω QUICKSTART.md**
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤" —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –£–ª—É—á—à–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

- **–û–±–Ω–æ–≤–ª–µ–Ω TESTING_GUIDE.md**
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π —Ä–∞–∑–¥–µ–ª "Unit —Ç–µ—Å—Ç—ã" —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
  - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è

- **–û–±–Ω–æ–≤–ª–µ–Ω PROJECT_STATUS.md**
  - –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Ä–∞–∑–¥–µ–ª "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

---

## [2026-01-10] - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ Production-readiness

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)

- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ API –∫–ª—é—á–µ–π CRM** (`shared/utils/crypto.py`)
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `CryptoService` —Å Fernet (AES-128-CBC + HMAC-SHA256)
  - PBKDF2 –¥–ª—è –≤—ã–≤–æ–¥–∞ –∫–ª—é—á–∞ –∏–∑ master password (480,000 –∏—Ç–µ—Ä–∞—Ü–∏–π)
  - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
  - –ú–µ—Ç–æ–¥—ã: `encrypt()`, `decrypt()`, `is_encrypted()`, `encrypt_if_needed()`

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API Gateway** (`api_gateway/src/core/security.py`)
  - API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `X-API-Key` header
  - Webhook signature verification (HMAC-SHA256) —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç replay attacks
  - FastAPI dependencies: `verify_api_key`, `verify_webhook_signature`
  - Constant-time comparison –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks

- **Rate Limiting** (`api_gateway/src/middleware/rate_limit.py`)
  - Redis-based sliding window –∞–ª–≥–æ—Ä–∏—Ç–º
  - –†–∞–∑–Ω—ã–µ –ª–∏–º–∏—Ç—ã –ø–æ —Ç–∏–ø—É –∫–ª–∏–µ–Ω—Ç–∞:
    - IP: 100 req/min
    - API Key: 1000 req/min
    - Webhooks: 200 req/min
  - Headers: `X-RateLimit-Limit`, `X-RateLimit-Remaining`, `X-RateLimit-Reset`

### üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)

- **–£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è —Ñ–∞–π–ª** `ai_agent/src/app.py`
  - –°–æ–¥–µ—Ä–∂–∞–ª –æ—à–∏–±–∫–∏ (structlog.stdlib)
  - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª: `ai_agent/src/main.py`

- **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** (`ai_agent/src/storage/redis_storage.py`)
  - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `add_message_to_history()`, `get_conversation_history()`, `clear_history()`
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Redis
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TTL
  - Orchestrator –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

- **Unit —Ç–µ—Å—Ç—ã** (`tests/`)
  - `tests/unit/test_crypto.py` - —Ç–µ—Å—Ç—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
  - `tests/unit/test_crm_factory.py` - —Ç–µ—Å—Ç—ã CRM factory
  - `tests/unit/test_security.py` - —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - `tests/conftest.py` - pytest fixtures
  - `pytest.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest

### üöÄ Production Readiness (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)

- **Webhook —Ä–µ–∂–∏–º –¥–ª—è Telegram** (`telegram_bot/src/main.py`)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ polling (dev) –∏ webhook (production) —Ä–µ–∂–∏–º–æ–≤
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `BOT_MODE` environment variable
  - aiohttp server –¥–ª—è webhook endpoint
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ webhook –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ/–æ—Å—Ç–∞–Ω–æ–≤–∫–µ

- **Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–æ–≤** (`telegram_bot/src/keyboards.py`)
  - `create_time_slots_keyboard()` - –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏
  - `create_dates_keyboard()` - –≤—ã–±–æ—Ä –¥–∞—Ç—ã
  - `create_services_keyboard()` - –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏
  - `create_employees_keyboard()` - –≤—ã–±–æ—Ä –º–∞—Å—Ç–µ—Ä–∞
  - `create_confirmation_keyboard()` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
  - Callback handlers –≤ `bot.py`

- **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (Alembic)** (`infrastructure/migrations/`)
  - `alembic.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  - `env.py` - async SQLAlchemy support
  - `versions/20260110_0001_initial_schema.py` - –Ω–∞—á–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~82% (–±—ã–ª–æ 75%)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|-----------|------------|
| AI Agent —è–¥—Ä–æ | 98% |
| API Gateway | 98% |
| Telegram Bot | 98% |
| Security | 95% |
| CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | 85% |
| Database/Migrations | 95% |
| Unit —Ç–µ—Å—Ç—ã | 30% |
| WhatsApp/Voice | 5% |
| Website | 0% |

---

## [2026-01-10] - CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω—ã

### üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ API (—è–Ω–≤–∞—Ä—å 2026)

–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –¥–ª—è –≤—Å–µ—Ö —Ü–µ–ª–µ–≤—ã—Ö CRM —Å–∏—Å—Ç–µ–º:

| CRM | API Status | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|-----|------------|--------------|
| **YCLIENTS** | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | [yclients.docs.apiary.io](https://yclients.docs.apiary.io/) |
| **Bitrix24** | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | [apidocs.bitrix24.com](https://apidocs.bitrix24.com/) (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–∫—Ç—è–±—Ä—å 2025) |
| **1C:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ** | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | OData 3.0 REST API, [its.1c.ru](https://its.1c.ru/db/intgr83/content/47/hdoc) |
| **DIKIDI** | ‚ö†Ô∏è –ù–ï–¢ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ

- **1C:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ –∞–¥–∞–ø—Ç–µ—Ä** (`crm_integrations/src/adapters/onec.py`)
  - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OData 3.0 REST API
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Basic Auth
  - –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏ (Catalog_*), –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (Document_*)
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –∏–º–µ–Ω–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π 1C
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: 1C:–£–ù–§, 1C:–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã, 1C:–§–∏—Ç–Ω–µ—Å –∫–ª—É–±, 1C:–ú–µ–¥–∏—Ü–∏–Ω–∞

- **amoCRM –∞–¥–∞–ø—Ç–µ—Ä** (`crm_integrations/src/adapters/amocrm.py`)
  - OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º refresh —Ç–æ–∫–µ–Ω–∞
  - –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏, —Å–¥–µ–ª–∫–∞–º–∏, –∑–∞–¥–∞—á–∞–º–∏
  - API v4 (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –º–æ–¥–µ–ª—å "–∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ —Å–¥–µ–ª–∫–∏" (amoCRM –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)

- **Altegio –∞–¥–∞–ø—Ç–µ—Ä** (`crm_integrations/src/adapters/altegio.py`)
  - –†–µ–±—Ä–µ–Ω–¥–∏–Ω–≥ YCLIENTS —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º API
  - API URL: https://api.alteg.io/api/v1/
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ webhook setup –¥–ª—è real-time —Å–æ–±—ã—Ç–∏–π
  - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ BaseCRMAdapter

- **EasyWeek –∞–¥–∞–ø—Ç–µ—Ä** (`crm_integrations/src/adapters/easyweek.py`)
  - –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å–∏
  - 35,000+ –±–∏–∑–Ω–µ—Å–æ–≤ –≤ 40+ —Å—Ç—Ä–∞–Ω–∞—Ö
  - API URL: https://my.easyweek.io/api/ext/
  - Bearer token –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ

- **DIKIDI –∞–¥–∞–ø—Ç–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω** —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–± –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞—Ö: Albato, ApiMonster, –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π wrapper
  - –ê–¥–∞–ø—Ç–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ placeholder –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ CRM –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

| –ê–¥–∞–ø—Ç–µ—Ä | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|---------|--------|------------|
| Bitrix24 | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 95% |
| YCLIENTS | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 90% |
| 1C:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 85% (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |
| amoCRM | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 85% (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |
| Altegio | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 85% (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |
| EasyWeek | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | 85% (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |
| DIKIDI | ‚ö†Ô∏è Placeholder | 20% (–Ω–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API) |

### üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- YCLIENTS Python wrappers: [yclients-api-python](https://github.com/CoolmixZero/yclients-api-python), [yclients-aio-client](https://github.com/akimrx/yclients-aio-client)
- Bitrix24 Python wrapper: [bitrix24-python-rest](https://github.com/akopdev/bitrix24-python-rest)
- DIKIDI –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π wrapper: [dikidi-api](https://github.com/ixtora/dikidi-api)

---

## [2026-01-09] - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ Pydantic**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—è `date` –≤ –º–æ–¥–µ–ª–∏ `CRMTimeSlot`
  - –ü–æ–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã: `date` ‚Üí `slot_date`, `start_time` ‚Üí `slot_time`
  - –ü—Ä–∏—á–∏–Ω–∞: –∏–º—è –ø–æ–ª—è —Å–æ–≤–ø–∞–¥–∞–ª–æ —Å —Ç–∏–ø–æ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
  - –§–∞–π–ª: `shared/models/crm.py:93-94`

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ SQLAlchemy**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç `metadata` –≤ –º–æ–¥–µ–ª–∏ `Message`
  - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ `message_metadata`
  - `metadata` - –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–º—è –≤ SQLAlchemy Declarative API
  - –§–∞–π–ª—ã: `shared/database/models.py:209`, `infrastructure/database/schema.sql:191`

- **–û—à–∏–±–∫–∞ structlog**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `structlog.stdlib.INFO`
  - –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `logging.INFO` (structlog.stdlib –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç —É—Ä–æ–≤–Ω–µ–π)
  - –§–∞–π–ª—ã: `ai_agent/src/main.py:22`, `api_gateway/src/main.py:24`

- **–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞**: –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ `__init__.py` —Ñ–∞–π–ª—ã
  - –§–∞–π–ª—ã: `api_gateway/src/__init__.py`, `api_gateway/src/api/__init__.py`, –∏ –¥—Ä.

- **–û—à–∏–±–∫–∞ 404 "Channel not found"**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
  - –°–æ–∑–¥–∞–Ω `infrastructure/database/seed.sql` —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–µ–π –∏ –∫–∞–Ω–∞–ª–æ–º
  - `docker-compose.yml` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç seed –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ
- **AI Agent HTTP Server**: –î–æ–±–∞–≤–ª–µ–Ω FastAPI —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8001
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/process` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç API Gateway
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
  - –§–∞–π–ª: `ai_agent/src/main.py`

- **Seed Data –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ë–î
  - –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è "–¢–µ—Å—Ç–æ–≤—ã–π –°–∞–ª–æ–Ω –ö—Ä–∞—Å–æ—Ç—ã"
  - CRM –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Bitrix24)
  - Agent –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —É—Å–ª—É–≥
  - Telegram –∫–∞–Ω–∞–ª —Å —Ç–æ–∫–µ–Ω–æ–º `test-webhook-token-123`
  - –§–∞–π–ª: `infrastructure/database/seed.sql`

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ AI Agent**: –î–æ–±–∞–≤–ª–µ–Ω—ã FastAPI, uvicorn, httpx
  - –§–∞–π–ª: `ai_agent/requirements.txt`

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ
- **AI Agent Dockerfile**: –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç uvicorn –≤–º–µ—Å—Ç–æ python -m
  - `CMD ["uvicorn", "src.main:app", "--host", "0.0.0.0", "--port", "8001"]`

- **docker-compose.yml**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ seed.sql –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PostgreSQL

### üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞
**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~62% (–±—ã–ª–æ 58%)
- ‚úÖ AI Agent —è–¥—Ä–æ: 95% (HTTP —Å–µ—Ä–≤–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω)
- ‚úÖ API Gateway: 95%
- ‚úÖ Telegram Bot: 95% (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ Database/Seed: 90%
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 90%
- üîÑ CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: 10%

---

## [2026-01-09] - Telegram Bot –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é (—Ä–∞–Ω–µ–µ)

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—è `time` –≤ –º–æ–¥–µ–ª–∏ `CRMTimeSlot`
  - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ `start_time` –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å —Ç–∏–ø–æ–º `time` –∏–∑ datetime
  - –§–∞–π–ª: `shared/models/crm.py:94`
- –î–æ–±–∞–≤–ª–µ–Ω `pydantic[email]` –≤ `shared/setup.py` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ EmailStr –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –≤ Dockerfile –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å shared –ø–∞–∫–µ—Ç–∞–º–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ Docker: shared –∏ crm_integrations —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ requirements.txt

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ
- **Telegram Bot** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å polling —Ä–µ–∂–∏–º–æ–º (aiogram 3.24+)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ `/start` –∏ `/help`
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API Gateway —á–µ—Ä–µ–∑ HTTP
  - –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç AI –∞–≥–µ–Ω—Ç–∞
  - Dockerfile –∏ docker-compose –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –§–∞–π–ª—ã: `telegram_bot/src/bot.py`, `telegram_bot/src/main.py`, `telegram_bot/src/gateway_client.py`

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API Gateway ‚Üî AI Agent –∑–∞–≤–µ—Ä—à–µ–Ω–∞**
  - API Gateway —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç AI –∞–≥–µ–Ω—Ç–∞
  - –§–∞–π–ª: `api_gateway/src/api/routers/telegram.py:105-124`

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
  - `CONFIGURATION.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ .env —Ñ–∞–π–ª–æ–≤
  - `TESTING_GUIDE.md` - –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
  - `infrastructure/database/setup_test_company.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏

- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ CLAUDE.md**
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
  - –ß–µ—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è PROJECT_STATUS.md –∏ CHANGELOG.md

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ
- **–£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –æ–¥–∏–Ω .env —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Docker Compose
  - –ö–æ—Ä–Ω–µ–≤–æ–π `.env.example` —Ç–µ–ø–µ—Ä—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Docker
  - `.env.example` –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ë–ï–ó Docker
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ .env.example —Ñ–∞–π–ª–∞—Ö

- **Docker build context** –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  - `docker-compose.yml`: context —Ç–µ–ø–µ—Ä—å `.` –≤–º–µ—Å—Ç–æ `./ai_agent`, `./api_gateway`, `./telegram_bot`
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ Dockerfile –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  - –§–∞–π–ª—ã: `ai_agent/Dockerfile`, `api_gateway/Dockerfile`, `telegram_bot/Dockerfile`

- **Requirements.txt** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
  - –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã `-e ../shared` –∏ `-e ../crm_integrations`
  - –≠—Ç–∏ –ø–∞–∫–µ—Ç—ã —Ç–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ Dockerfile
  - –§–∞–π–ª—ã: `ai_agent/requirements.txt`, `api_gateway/requirements.txt`

- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
  - `README.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ TESTING_GUIDE.md –∏ —Å—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
  - `PROJECT_STATUS.md` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ ~58%
  - `docs/architecture.mmd` - –¥–æ–±–∞–≤–ª–µ–Ω—ã multi-tenant –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ CRM Factory

### üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞
**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~58% (–±—ã–ª–æ 55%)
- ‚úÖ AI Agent —è–¥—Ä–æ: 90%
- ‚úÖ API Gateway: 95%
- ‚úÖ Telegram Bot: 90%
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 85%
- üîÑ CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: 10%

---

## [2026-01-07] - Multi-tenant refactoring complete

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- Import errors —Å shared –∏ crm_integrations –ø–∞–∫–µ—Ç–∞–º–∏
- Deprecated `datetime.utcnow()` –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `datetime.now(timezone.utc)`

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –±–∏–∑–Ω–µ—Å–∞ –≤ company_agent_settings
- AI Agent FastAPI application
- API Gateway –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Agent
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ ARCHITECTURE.md

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é multi-tenant
- Dynamic CRM adapter creation –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏

---

## [2026-01-06] - Initial project setup

### üöÄ –î–æ–±–∞–≤–ª–µ–Ω–æ
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- PostgreSQL schema –¥–ª—è multi-tenant
- Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (Message, Session, CRM models)
- Orchestrator —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π multi-tenant
- Gemini Service –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Prompt Manager –∏ Tool Manager
- Redis storage –¥–ª—è —Å–µ—Å—Å–∏–π
- CRM integrations framework (BaseCRMAdapter, CRMFactory)
