# AI-Admin - –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-01-07

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞ CRM (—è–Ω–≤–∞—Ä—å 2026)

**–¢–æ–ø-4 CRM –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –≤ –†–§:**
1. **YCLIENTS** - –ª–∏–¥–µ—Ä –¥–ª—è beauty, —Ñ–∏—Ç–Ω–µ—Å–∞, –º–µ–¥—Ü–µ–Ω—Ç—Ä–æ–≤
2. **DIKIDI** - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç YCLIENTS –≤ beauty-—Å–µ–≥–º–µ–Ω—Ç–µ  
3. **1C:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ** - –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç
4. **–ë–∏—Ç—Ä–∏–∫—Å24** - –º–∞–ª—ã–π –∏ —Å—Ä–µ–¥–Ω–∏–π –±–∏–∑–Ω–µ—Å (#1 CRM –≤ –†–æ—Å—Å–∏–∏)

**API –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
- ‚úÖ –ë–∏—Ç—Ä–∏–∫—Å24: –æ—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, webhooks
- ‚úÖ YCLIENTS: REST API, webhooks —á–µ—Ä–µ–∑ Marketplace
- ‚ö†Ô∏è DIKIDI: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ 1C: REST API —á–µ—Ä–µ–∑ OData 3.0

### 2. –Ø–¥—Ä–æ AI Agent ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- ‚úÖ **Config Management** (`ai_agent/src/config.py`)
  - Pydantic Settings –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env —Ñ–∞–π–ª–æ–≤
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

- ‚úÖ **Gemini Service** (`ai_agent/src/services/gemini_service.py`)
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º google-genai SDK
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ function calling
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–∏–∞–ª–æ–≥–∞
  - Async API

- ‚úÖ **Prompt Manager** (`ai_agent/src/services/prompt_manager.py`)
  - –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–∏–∞–ª–æ–≥–∞
  - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏
  - –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏
  - 6 —Å–æ—Å—Ç–æ—è–Ω–∏–π: GREETING, COLLECTING_INFO, CONSULTING, BOOKING, CONFIRMING, COMPLETED

- ‚úÖ **Tool Manager** (`ai_agent/src/services/tool_manager.py`)
  - Function calling –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Gemini
  - 9 —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CRM:
    - get_services, get_available_slots
    - get_client_by_phone, create_client
    - create_appointment, cancel_appointment
    - –∏ –¥—Ä.
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM –∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏

- ‚úÖ **Redis Storage** (`ai_agent/src/storage/redis_storage.py`)
  - Async Redis –¥–ª—è —Å–µ—Å—Å–∏–π
  - TTL —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - Health checks

- ‚úÖ **Orchestrator** (`ai_agent/src/core/orchestrator.py`)
  - –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–∏–∞–ª–æ–≥–∞
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ function calls
  - –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### 3. API Gateway ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- ‚úÖ **FastAPI Application** (`api_gateway/src/main.py`)
  - CORS middleware
  - Structured logging
  - Health checks

- ‚úÖ **–†–æ—É—Ç–µ—Ä—ã:**
  - `/health` - health check —ç–Ω–¥–ø–æ–∏–Ω—Ç
  - `/api/v1/messages` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
  - `/api/v1/telegram/webhook` - Telegram webhook
  - `/api/v1/whatsapp/webhook` - WhatsApp webhook (—Å GET –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)

- ‚úÖ **Models** (`api_gateway/src/models/requests.py`)
  - MessageRequest/MessageResponse
  - HealthResponse
  - Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 4. Shared Components ‚úÖ

- ‚úÖ **Data Models** (`shared/models/`)
  - Message - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π
  - Session - –º–æ–¥–µ–ª—å —Å–µ—Å—Å–∏–∏ –¥–∏–∞–ª–æ–≥–∞
  - CRM Models: Client, Service, Employee, TimeSlot, Appointment

### 5. CRM Integrations ‚úÖ

- ‚úÖ **BaseCRMAdapter** - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ **CRMFactory** - —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
- ‚úÖ **Bitrix24Adapter** (–∑–∞–≥–ª—É—à–∫–∞) - –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 6. Infrastructure ‚úÖ

- ‚úÖ **Docker Compose** (`docker-compose.yml`)
  - Redis
  - PostgreSQL
  - AI Agent
  - API Gateway
  - Networks –∏ volumes

- ‚úÖ **Dockerfiles**
  - `ai_agent/Dockerfile`
  - `api_gateway/Dockerfile`

- ‚úÖ **Documentation**
  - `CLAUDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  - `README.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
  - `QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
  - `PROJECT_STATUS.md` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ / TODO

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è CRM –∞–¥–∞–ø—Ç–µ—Ä–æ–≤**
   - [ ] –ë–∏—Ç—Ä–∏–∫—Å24 –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - [ ] YCLIENTS –∞–¥–∞–ø—Ç–µ—Ä
   - [ ] DIKIDI –∞–¥–∞–ø—Ç–µ—Ä
   - [ ] 1C –∞–¥–∞–ø—Ç–µ—Ä

2. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ Orchestrator**
   - [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ PostgreSQL
   - [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
   - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ recovery

3. **API Gateway –¥–æ—Ä–∞–±–æ—Ç–∫–∞**
   - [ ] –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Agent (—Å–µ–π—á–∞—Å –∑–∞–≥–ª—É—à–∫–∞)
   - [ ] Telegram webhook –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - [ ] WhatsApp webhook –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ rate limiting

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **Telegram Bot**
   - [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è telegram-bot —Å–µ—Ä–≤–∏—Å–∞
   - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
   - [ ] Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–æ–≤

5. **WhatsApp Handler**
   - [ ] –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è whatsapp-handler
   - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–¥–∏–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
   - [ ] –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

6. **Voice Handler**
   - [ ] STT/TTS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - [ ] VoIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - [ ] Real-time audio streaming

7. **PostgreSQL Schema**
   - [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (Alembic)
   - [ ] –ú–æ–¥–µ–ª–∏ –¥–ª—è SQLAlchemy
   - [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

8. **Website**
   - [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
   - [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - [ ] Dashboard —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

9. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è AI Agent
   - [ ] Integration —Ç–µ—Å—Ç—ã
   - [ ] E2E —Ç–µ—Å—Ç—ã

10. **CI/CD**
    - [ ] GitHub Actions
    - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    - [ ] –î–µ–ø–ª–æ–π

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~40%

- ‚úÖ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 100%
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: 100%
- ‚úÖ AI Agent —è–¥—Ä–æ: 90%
- ‚úÖ API Gateway –±–∞–∑–æ–≤—ã–π: 70%
- üîÑ CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: 10% (—Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
- üîÑ –ö–∞–Ω–∞–ª—ã (Telegram, WhatsApp, Voice): 5%
- ‚è≥ Website: 0%
- ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 0%

## üéØ –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏ (—Å–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é API Gateway ‚Üî AI Agent
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ë–∏—Ç—Ä–∏–∫—Å24 –∞–¥–∞–ø—Ç–µ—Ä (–ø–æ–ª–Ω–æ—Å—Ç—å—é)
3. –°–æ–∑–¥–∞—Ç—å PostgreSQL —Å—Ö–µ–º—É –∏ –º–æ–¥–µ–ª–∏
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Telegram –±–æ—Ç
5. –ù–∞–ø–∏—Å–∞—Ç—å integration —Ç–µ—Å—Ç—ã

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ Docker Compose!

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp .env.example .env

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose up --build

# 3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ
curl http://localhost:8000/health
```

**‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω—ã:
- Google Gemini API –∫–ª—é—á
- CRM API –∫–ª—é—á (–ë–∏—Ç—Ä–∏–∫—Å24)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ë–∏—Ç—Ä–∏–∫—Å24 –∞–¥–∞–ø—Ç–µ—Ä–∞ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
